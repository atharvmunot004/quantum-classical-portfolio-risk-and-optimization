{
  "description": "Monte Carlo VaR/CVaR metrics parquet schema",
  "primary_key": [
    "portfolio_id",
    "date",
    "confidence_level",
    "horizon",
    "estimation_window"
  ],
  "columns": [
    {
      "name": "portfolio_id",
      "dtype": "int64",
      "nullable": "False",
      "description": "Portfolio identifier"
    },
    {
      "name": "date",
      "dtype": "datetime64[ns]",
      "nullable": "False",
      "description": "Evaluation date"
    },
    {
      "name": "confidence_level",
      "dtype": "float64",
      "nullable": "False",
      "description": "VaR/CVaR confidence level (e.g., 0.95 for 95%)"
    },
    {
      "name": "horizon",
      "dtype": "int64",
      "nullable": "False",
      "description": "Time horizon in days"
    },
    {
      "name": "estimation_window",
      "dtype": "int64",
      "nullable": "False",
      "description": "Estimation window size in days"
    },
    {
      "name": "hit_rate",
      "dtype": "float64",
      "nullable": "False",
      "description": "Proportion of VaR violations"
    },
    {
      "name": "violation_ratio",
      "dtype": "float64",
      "nullable": "False",
      "description": "Ratio of actual to expected violations"
    },
    {
      "name": "kupiec_unconditional_coverage",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "kupiec_test_statistic",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "kupiec_reject_null",
      "dtype": "bool",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "christoffersen_independence",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "christoffersen_independence_statistic",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "christoffersen_independence_reject_null",
      "dtype": "bool",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "christoffersen_conditional_coverage",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "christoffersen_conditional_coverage_statistic",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "christoffersen_conditional_coverage_reject_null",
      "dtype": "bool",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "traffic_light_zone",
      "dtype": "object",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "num_violations",
      "dtype": "int64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "total_observations",
      "dtype": "int64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "expected_violations",
      "dtype": "float64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "mean_exceedance",
      "dtype": "float64",
      "nullable": "True",
      "description": "Tail exceedance metric"
    },
    {
      "name": "max_exceedance",
      "dtype": "float64",
      "nullable": "True",
      "description": "Tail exceedance metric"
    },
    {
      "name": "std_exceedance",
      "dtype": "float64",
      "nullable": "True",
      "description": "Tail exceedance metric"
    },
    {
      "name": "quantile_loss_score",
      "dtype": "float64",
      "nullable": "True",
      "description": "Computed metric"
    },
    {
      "name": "rmse_var_vs_losses",
      "dtype": "float64",
      "nullable": "True",
      "description": "Value at Risk metric"
    },
    {
      "name": "cvar_mean_exceedance",
      "dtype": "float64",
      "nullable": "True",
      "description": "Conditional Value at Risk metric"
    },
    {
      "name": "cvar_max_exceedance",
      "dtype": "float64",
      "nullable": "True",
      "description": "Conditional Value at Risk metric"
    },
    {
      "name": "cvar_std_exceedance",
      "dtype": "float64",
      "nullable": "True",
      "description": "Conditional Value at Risk metric"
    },
    {
      "name": "skewness",
      "dtype": "float64",
      "nullable": "False",
      "description": "Return distribution skewness"
    },
    {
      "name": "kurtosis",
      "dtype": "float64",
      "nullable": "False",
      "description": "Return distribution excess kurtosis"
    },
    {
      "name": "jarque_bera_p_value",
      "dtype": "float64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "jarque_bera_statistic",
      "dtype": "float64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "portfolio_size",
      "dtype": "int64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "num_active_assets",
      "dtype": "int64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "hhi_concentration",
      "dtype": "float64",
      "nullable": "False",
      "description": "Herfindahl-Hirschman Index (concentration measure)"
    },
    {
      "name": "effective_number_of_assets",
      "dtype": "float64",
      "nullable": "False",
      "description": "Computed metric"
    },
    {
      "name": "covariance_condition_number",
      "dtype": "float64",
      "nullable": "False",
      "description": "Value at Risk metric"
    }
  ],
  "metadata": {
    "task": "monte_carlo_var_cvar_evaluation_batched_fast_safe_v3",
    "data_period": "2015-12-01 to 2025-12-01",
    "num_portfolios": 100000,
    "confidence_levels": [
      0.95,
      0.99
    ],
    "horizons": [
      1,
      10
    ],
    "estimation_windows": [
      252
    ],
    "generated_at": "2025-12-31T11:42:06.508089",
    "loop_order": "time->batch->simulations",
    "kernel_validation": {
      "batched_path_active": true,
      "forbidden_function_called": false
    }
  }
}