{
  "task": "monte_carlo_var_cvar_asset_level_evaluation_optimized",

  "design_principle": {
    "mc_scope": "asset_level_only",
    "portfolio_projection": false,
    "rationale": "Monte Carlo simulation is calibrated and evaluated strictly on individual asset return series. Parametric return distributions are estimated using rolling windows, and forward return paths are simulated to obtain empirical VaR and CVaR per asset and time. All backtesting, tail diagnostics, and time-sliced evaluations (year/quarter/month) are computed per asset, ensuring IEEE Access-grade empirical rigor without portfolio aggregation assumptions."
  },

  "inputs": {
    "panel_price_path": "data/preprocessed/panel_price.parquet",
    "asset_universe": {
      "mode": "from_columns",
      "include": null,
      "exclude": null
    }
  },

  "data_settings": {
    "return_type": "log",
    "tail_side": "left",
    "calendar": {
      "sort_index": true,
      "drop_duplicate_dates": true,
      "timezone": null
    },
    "missing_data_policy": {
      "dropna": "per_asset",
      "min_required_observations": 800
    }
  },

  "monte_carlo_settings": {
    "distribution": "normal",
    "parameter_estimation": {
      "method": "rolling_sample_moments",
      "parameters": ["mean", "volatility"],
      "demean_returns": true
    },

    "estimation_windows": [252, 500],

    "simulation": {
      "num_simulations": 100000,
      "path_length": 1,
      "antithetic_variates": true,
      "moment_matching": true,
      "reuse_random_draws_across_assets": false
    },

    "confidence_levels": [0.95, 0.99],

    "horizons": {
      "base_horizon": 1,
      "scaled_horizons": [10],
      "scaling_rule": "sqrt_time",
      "note": "Multi-horizon risk is computed by scaling simulated one-step volatility using sqrt-time; confidence levels remain unchanged."
    },

    "rolling": {
      "enabled": true,
      "step_size": 1,
      "warmup_policy": "skip_until_window_full",
      "var_cvar_series_mode": "rolling_time_series"
    },

    "random_seed": 42
  },

  "computation_strategy": {
    "compute_daily_returns_once": true,

    "rolling_engine": {
      "vectorization": "per_asset_loop",
      "parallelization_axis": ["asset"],
      "max_workers": "auto",
      "chunk_assets": 1
    },

    "cache": {
      "enabled": true,
      "scope": "per_asset_per_window_per_time_index",
      "store_format": "parquet",

      "parameter_store_path": "cache/monte_carlo_asset_parameters.parquet",
      "simulation_store_path": "cache/monte_carlo_asset_simulated_returns.parquet",

      "key_fields": [
        "asset",
        "date",
        "estimation_window",
        "distribution",
        "num_simulations",
        "confidence_level",
        "horizon",
        "tail_side",
        "return_type"
      ],

      "write_mode": "append_or_upsert",
      "cache_hit_ratio_metric": true
    },

    "runtime_instrumentation": {
      "enabled": true,
      "measure": [
        "total_runtime_ms",
        "returns_compute_time_ms",
        "parameter_estimation_time_ms",
        "simulation_time_ms",
        "var_compute_time_ms",
        "cvar_compute_time_ms",
        "backtesting_time_ms",
        "time_slicing_time_ms"
      ]
    },

    "safety_checks": {
      "enabled": true,
      "checks": [
        {
          "name": "var_positive",
          "rule": "VaR > 0",
          "on_fail": "skip_timestamp"
        },
        {
          "name": "expected_hit_rate_sanity",
          "rule": "abs(hit_rate - (1 - confidence_level)) <= 5 * (1 - confidence_level)",
          "on_fail": "flag_and_continue"
        },
        {
          "name": "sufficient_simulations",
          "rule": "num_simulations >= 10000",
          "on_fail": "abort_run"
        }
      ]
    }
  },

  "evaluation": {
    "scope": "per_asset",
    "outputs_granularity": {
      "series_level": true,
      "summary_level": true,
      "time_sliced_level": true
    },

    "backtesting": {
      "enabled": true,
      "tests": [
        "hit_rate",
        "violation_ratio",
        "kupiec_unconditional_coverage",
        "christoffersen_independence",
        "christoffersen_conditional_coverage",
        "traffic_light_zone"
      ],
      "notes": "Backtesting is performed on aligned (realized returns, Monte Carlo VaR, Monte Carlo CVaR) time series per asset."
    },

    "time_sliced_metrics": {
      "enabled": true,
      "slice_by": ["year", "quarter", "month"],
      "minimum_observations_per_slice": 60,
      "metrics": [
        "hit_rate",
        "num_violations",
        "expected_violations",
        "violation_ratio",
        "cvar_hit_rate",
        "cvar_num_violations"
      ]
    }
  },

  "metrics": {
    "accuracy": [
      "hit_rate",
      "violation_ratio",
      "num_violations",
      "total_observations",
      "expected_violations",
      "kupiec_unconditional_coverage",
      "kupiec_test_statistic",
      "kupiec_reject_null",
      "christoffersen_independence",
      "christoffersen_independence_statistic",
      "christoffersen_independence_reject_null",
      "christoffersen_conditional_coverage",
      "christoffersen_conditional_coverage_statistic",
      "christoffersen_conditional_coverage_reject_null",
      "traffic_light_zone"
    ],

    "tail_behavior_var": [
      "mean_exceedance",
      "max_exceedance",
      "std_exceedance",
      "quantile_loss_score",
      "rmse_var_vs_losses"
    ],

    "tail_behavior_cvar": [
      "cvar_mean_exceedance",
      "cvar_max_exceedance",
      "cvar_std_exceedance",
      "rmse_cvar_vs_losses"
    ],

    "monte_carlo_specific": [
      "estimated_mean",
      "estimated_volatility",
      "num_simulations",
      "simulation_bias",
      "variance_of_simulated_returns",
      "tail_quantile_stability"
    ],

    "distribution": [
      "skewness",
      "kurtosis",
      "jarque_bera_p_value",
      "jarque_bera_statistic"
    ],

    "runtime": [
      "total_runtime_ms",
      "runtime_per_asset_ms",
      "p95_runtime_ms",
      "mean_runtime_ms",
      "median_runtime_ms",
      "min_runtime_ms",
      "max_runtime_ms",
      "simulation_time_ms",
      "cache_hit_ratio"
    ]
  },

  "outputs": {
    "parameter_store": {
      "path": "cache/monte_carlo_asset_parameters.parquet",
      "contents": [
        "asset",
        "date",
        "estimation_window",
        "estimated_mean",
        "estimated_volatility",
        "distribution",
        "num_simulations",
        "fit_success"
      ]
    },

    "risk_series_store": {
      "path": "results/classical_risk/monte_carlo_asset_var_cvar_series.parquet",
      "format": "parquet",
      "contents": [
        "asset",
        "date",
        "confidence_level",
        "horizon",
        "estimation_window",
        "VaR",
        "CVaR"
      ]
    },

    "metrics_table": {
      "path": "results/classical_risk/monte_carlo_asset_level_metrics.parquet",
      "format": "parquet",
      "row_granularity": "asset_x_confidence_x_horizon_x_window",
      "notes": "Aggregated metrics over the full backtest period per asset and configuration."
    },

    "time_sliced_metrics_table": {
      "path": "results/classical_risk/monte_carlo_asset_level_time_sliced_metrics.parquet",
      "format": "parquet",
      "row_granularity": "asset_x_slice_type_x_slice_value_x_confidence_x_horizon_x_window"
    },

    "monte_carlo_results_scheme.json": {
      "path": "results/classical_risk/monte_carlo_asset_level_results_scheme.json",
      "format": "json",
      "contents": "the scheme of the results, all the .parquet files"
    },

    "report": {
      "path": "results/classical_risk/monte_carlo_asset_level_report.md",
      "include_sections": [
        "methodology_overview",
        "distributional_assumptions",
        "parameter_estimation",
        "monte_carlo_simulation_design",
        "var_cvar_construction",
        "backtesting_results",
        "time_sliced_backtesting",
        "tail_risk_behavior",
        "distributional_characteristics",
        "computational_performance",
        "key_insights"
      ]
    }
  },

  "paper_usage_notes": {
    "simulation_phase": "Use this configuration for large-scale asset-level Monte Carlo evaluation across the full historical sample, multiple estimation windows, confidence levels, and horizons. This produces statistically coherent Monte Carlo VaR/CVaR backtests without portfolio aggregation confounds.",
    "paper_phase": "For paper figures/tables: select representative assets and stress subperiods; report both full-period metrics and time-sliced metrics (year/quarter/month). Explicitly compare Monte Carlo coverage and tail loss metrics against GARCH and EVT results."
  }
}
