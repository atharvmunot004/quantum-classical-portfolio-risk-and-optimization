{
  "task": "variance_covariance_var_asset_level_evaluation",

  "design_principle": {
    "model_scope": "asset_level_only",
    "portfolio_projection": false,
    "rationale": "Variance–Covariance VaR is estimated strictly per asset using rolling windows under the assumption of conditional normality. No portfolio aggregation or cross-asset covariance modeling is performed, ensuring methodological comparability with other single-asset risk models for IEEE Access–grade empirical evaluation."
  },

  "inputs": {
    "panel_price_path": "data/preprocessed/panel_price.parquet",
    "asset_universe": {
      "mode": "from_columns",
      "include": null,
      "exclude": null
    }
  },

  "data_settings": {
    "return_type": "log",
    "tail_side": "left",
    "calendar": {
      "sort_index": true,
      "drop_duplicate_dates": true,
      "timezone": null
    },
    "missing_data_policy": {
      "dropna": "per_asset",
      "min_required_observations": 800
    }
  },

  "variance_covariance_settings": {
    "distributional_assumption": "normal",
    "mean_estimator": "sample_mean",
    "volatility_estimator": "sample_std",

    "confidence_levels": [0.95, 0.99],

    "horizons": {
      "base_horizon": 1,
      "scaled_horizons": [10],
      "scaling_rule": "sqrt_time",
      "note": "VaR is scaled by the square-root-of-time rule; confidence levels remain unchanged across horizons."
    },

    "estimation_windows": [252, 500],

    "rolling": {
      "enabled": true,
      "step_size": 1,
      "warmup_policy": "skip_until_window_full",
      "var_series_mode": "rolling_time_series"
    }
  },

  "computation_strategy": {
    "compute_daily_returns_once": true,

    "rolling_engine": {
      "vectorization": "per_asset_loop",
      "parallelization_axis": ["asset"],
      "max_workers": "auto",
      "chunk_assets": 1
    },

    "cache": {
      "enabled": true,
      "scope": "per_asset_per_window_per_confidence_per_time_index",
      "store_format": "parquet",
      "parameter_store_path": "cache/varcov_asset_parameters.parquet",
      "key_fields": [
        "asset",
        "date",
        "estimation_window",
        "confidence_level",
        "horizon",
        "return_type",
        "distributional_assumption"
      ],
      "write_mode": "append_or_upsert",
      "cache_hit_ratio_metric": true
    },

    "runtime_instrumentation": {
      "enabled": true,
      "measure": [
        "total_runtime_ms",
        "returns_compute_time_ms",
        "mean_estimation_time_ms",
        "volatility_estimation_time_ms",
        "var_compute_time_ms",
        "backtesting_time_ms",
        "time_slicing_time_ms"
      ]
    },

    "safety_checks": {
      "enabled": true,
      "checks": [
        {
          "name": "volatility_positive",
          "rule": "sigma > 0",
          "on_fail": "skip_timestamp"
        },
        {
          "name": "var_positive",
          "rule": "VaR > 0",
          "on_fail": "skip_timestamp"
        },
        {
          "name": "expected_hit_rate_sanity",
          "rule": "abs(hit_rate - (1 - confidence_level)) <= 5 * (1 - confidence_level)",
          "on_fail": "flag_and_continue"
        }
      ]
    }
  },

  "evaluation": {
    "scope": "per_asset",
    "outputs_granularity": {
      "series_level": true,
      "summary_level": true,
      "time_sliced_level": true
    },

    "backtesting": {
      "enabled": true,
      "tests": [
        "hit_rate",
        "violation_ratio",
        "kupiec_unconditional_coverage",
        "christoffersen_independence",
        "christoffersen_conditional_coverage",
        "traffic_light_zone"
      ],
      "notes": "Backtesting is performed on aligned (returns, VaR) time series per asset."
    },

    "time_sliced_metrics": {
      "enabled": true,
      "slice_by": ["year", "quarter", "month"],
      "minimum_observations_per_slice": 60,
      "metrics": [
        "hit_rate",
        "num_violations",
        "expected_violations",
        "violation_ratio"
      ]
    }
  },

  "metrics": {
    "accuracy": [
      "hit_rate",
      "violation_ratio",
      "num_violations",
      "total_observations",
      "expected_violations",
      "kupiec_unconditional_coverage",
      "kupiec_test_statistic",
      "kupiec_reject_null",
      "christoffersen_independence",
      "christoffersen_independence_statistic",
      "christoffersen_independence_reject_null",
      "christoffersen_conditional_coverage",
      "christoffersen_conditional_coverage_statistic",
      "christoffersen_conditional_coverage_reject_null",
      "traffic_light_zone"
    ],

    "tail_behavior_var": [
      "mean_exceedance",
      "max_exceedance",
      "std_exceedance",
      "quantile_loss_score",
      "rmse_var_vs_losses"
    ],

    "distribution": [
      "rolling_mean",
      "rolling_volatility",
      "skewness",
      "kurtosis",
      "jarque_bera_p_value",
      "jarque_bera_statistic"
    ],

    "runtime": [
      "total_runtime_ms",
      "runtime_per_asset_ms",
      "p95_runtime_ms",
      "mean_runtime_ms",
      "median_runtime_ms",
      "min_runtime_ms",
      "max_runtime_ms",
      "mean_estimation_time_ms",
      "volatility_estimation_time_ms",
      "cache_hit_ratio"
    ]
  },

  "outputs": {
    "parameter_store": {
      "path": "cache/varcov_asset_parameters.parquet",
      "contents": [
        "asset",
        "date",
        "estimation_window",
        "rolling_mean",
        "rolling_volatility",
        "fit_success"
      ]
    },

    "risk_series_store": {
      "path": "results/classical_risk/varcov_asset_var_series.parquet",
      "format": "parquet",
      "contents": [
        "asset",
        "date",
        "confidence_level",
        "horizon",
        "estimation_window",
        "VaR"
      ]
    },

    "metrics_table": {
      "path": "results/classical_risk/varcov_asset_level_metrics.parquet",
      "format": "parquet",
      "row_granularity": "asset_x_confidence_x_horizon_x_window",
      "notes": "Aggregated backtesting metrics over the full evaluation period per asset."
    },

    "time_sliced_metrics_table": {
      "path": "results/classical_risk/varcov_asset_level_time_sliced_metrics.parquet",
      "format": "parquet",
      "row_granularity": "asset_x_slice_type_x_slice_value_x_confidence_x_horizon_x_window"
    },

    "results_scheme.json": {
      "path": "results/classical_risk/varcov_asset_level_results_scheme.json",
      "format": "json",
      "contents": "schema of all result parquet files and metrics"
    },

    "report": {
      "path": "results/classical_risk/varcov_asset_level_report.md",
      "include_sections": [
        "methodology_overview",
        "normality_assumption",
        "rolling_mean_volatility_estimation",
        "variance_covariance_var_construction",
        "backtesting_results",
        "time_sliced_backtesting",
        "distributional_characteristics",
        "computational_performance",
        "key_insights"
      ]
    }
  },

  "paper_usage_notes": {
    "baseline_role": "Use this configuration as the classical parametric baseline against EVT, GARCH, and historical simulation models.",
    "paper_phase": "Report comparative backtesting tables across EVT, GARCH, and Var-Cov VaR using identical asset sets, windows, horizons, and confidence levels to ensure methodological fairness."
  }
}
