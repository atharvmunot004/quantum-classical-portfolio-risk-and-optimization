{
  "task": "garch_1_1_var_cvar_asset_level_evaluation_optimized",

  "design_principle": {
    "garch_scope": "asset_level_only",
    "portfolio_projection": false,
    "rationale": "GARCH(1,1) is fitted and evaluated strictly on individual asset return series. Conditional volatility and rolling forecasts are produced as time series via rolling estimation windows. VaR/CVaR are computed per asset under the chosen conditional distribution and scaled horizons. All backtesting, tail diagnostics, distributional diagnostics, and time-sliced evaluation (year/quarter/month) are computed per asset to support IEEE Access-grade empirical evaluation without portfolio aggregation assumptions."
  },

  "inputs": {
    "panel_price_path": "data/preprocessed/panel_price.parquet",
    "asset_universe": {
      "mode": "from_columns",
      "include": null,
      "exclude": null
    }
  },

  "data_settings": {
    "return_type": "log",
    "tail_side": "left",
    "calendar": {
      "sort_index": true,
      "drop_duplicate_dates": true,
      "timezone": null
    },
    "missing_data_policy": {
      "dropna": "per_asset",
      "min_required_observations": 800
    }
  },

  "garch_settings": {
    "model_type": "GARCH",
    "p": 1,
    "q": 1,

    "mean_model": {
      "enabled": false
    },

    "distribution": "t",
    "student_t_df": 5,
    "estimation_windows": [252, 500],

    "rolling": {
      "enabled": true,
      "step_size": 1,
      "warmup_policy": "skip_until_window_full",
      "vol_series_mode": "rolling_time_series",
      "forecast_method": "rolling",
      "forecast_target": "one_step_ahead"
    },

    "constraints": {
      "omega_lower_bound": 1e-12,
      "alpha_lower_bound": 0.0,
      "beta_lower_bound": 0.0,
      "stationarity_enforced": true,
      "stationarity_rule": "alpha + beta < 1"
    },

    "fallback_long_run_variance": true,
    "fallback_policy": {
      "on_fit_fail": "use_ewma_or_sample_var",
      "ewma_lambda": 0.94,
      "min_variance_floor": 1e-12
    },

    "confidence_levels": [0.95, 0.99],

    "horizons": {
      "base_horizon": 1,
      "scaled_horizons": [10],
      "scaling_rule": "sqrt_time",
      "note": "Scale VaR/CVaR magnitude by horizon using sqrt-time on conditional volatility; do not change confidence level with horizon."
    },

    "random_seed": 42
  },

  "computation_strategy": {
    "compute_daily_returns_once": true,

    "rolling_engine": {
      "vectorization": "per_asset_loop",
      "parallelization_axis": ["asset"],
      "max_workers": "auto",
      "chunk_assets": 1
    },

    "cache": {
      "enabled": true,
      "scope": "per_asset_per_window_per_time_index",
      "store_format": "parquet",

      "parameter_store_path": "cache/garch_asset_parameters.parquet",
      "conditional_vol_store_path": "cache/garch_asset_conditional_volatility.parquet",
      "forecast_vol_store_path": "cache/garch_asset_forecast_volatility.parquet",

      "key_fields": [
        "asset",
        "date",
        "estimation_window",
        "confidence_level",
        "horizon",
        "tail_side",
        "return_type",
        "distribution",
        "p",
        "q",
        "mean_model_enabled"
      ],

      "write_mode": "append_or_upsert",
      "cache_hit_ratio_metric": true
    },

    "runtime_instrumentation": {
      "enabled": true,
      "measure": [
        "total_runtime_ms",
        "returns_compute_time_ms",
        "garch_fit_time_ms",
        "volatility_filter_time_ms",
        "forecast_time_ms",
        "var_compute_time_ms",
        "cvar_compute_time_ms",
        "backtesting_time_ms",
        "time_slicing_time_ms"
      ]
    },

    "safety_checks": {
      "enabled": true,
      "checks": [
        {
          "name": "sigma_positive",
          "rule": "sigma_t > 0",
          "on_fail": "skip_timestamp"
        },
        {
          "name": "var_positive",
          "rule": "VaR > 0",
          "on_fail": "skip_timestamp"
        },
        {
          "name": "stationarity_sanity",
          "rule": "alpha + beta < 1",
          "on_fail": "fallback_to_long_run_or_ewma"
        },
        {
          "name": "expected_hit_rate_sanity",
          "rule": "abs(hit_rate - (1 - confidence_level)) <= 5 * (1 - confidence_level)",
          "on_fail": "flag_and_continue"
        }
      ]
    }
  },

  "evaluation": {
    "scope": "per_asset",
    "outputs_granularity": {
      "series_level": true,
      "summary_level": true,
      "time_sliced_level": true
    },

    "backtesting": {
      "enabled": true,
      "tests": [
        "hit_rate",
        "violation_ratio",
        "kupiec_unconditional_coverage",
        "christoffersen_independence",
        "christoffersen_conditional_coverage",
        "traffic_light_zone"
      ],
      "notes": "Backtesting is performed on aligned (returns, VaR, CVaR) time series per asset. Violations are defined for left-tail risk: return_t < -VaR_t."
    },

    "time_sliced_metrics": {
      "enabled": true,
      "slice_by": ["year", "quarter", "month"],
      "minimum_observations_per_slice": 60,
      "metrics": [
        "hit_rate",
        "num_violations",
        "expected_violations",
        "violation_ratio",
        "cvar_hit_rate",
        "cvar_num_violations"
      ]
    }
  },

  "metrics": {
    "accuracy": [
      "hit_rate",
      "violation_ratio",
      "num_violations",
      "total_observations",
      "expected_violations",
      "kupiec_unconditional_coverage",
      "kupiec_test_statistic",
      "kupiec_reject_null",
      "christoffersen_independence",
      "christoffersen_independence_statistic",
      "christoffersen_independence_reject_null",
      "christoffersen_conditional_coverage",
      "christoffersen_conditional_coverage_statistic",
      "christoffersen_conditional_coverage_reject_null",
      "traffic_light_zone"
    ],

    "tail_behavior_var": [
      "mean_exceedance",
      "max_exceedance",
      "std_exceedance",
      "quantile_loss_score",
      "rmse_var_vs_losses"
    ],

    "tail_behavior_cvar": [
      "cvar_mean_exceedance",
      "cvar_max_exceedance",
      "cvar_std_exceedance",
      "rmse_cvar_vs_losses"
    ],

    "garch_specific": [
      "omega",
      "alpha",
      "beta",
      "alpha_plus_beta",
      "unconditional_variance",
      "last_conditional_sigma",
      "fit_success",
      "convergence_flag",
      "loglikelihood",
      "aic",
      "bic"
    ],

    "distribution": [
      "skewness",
      "kurtosis",
      "jarque_bera_p_value",
      "jarque_bera_statistic"
    ],

    "runtime": [
      "total_runtime_ms",
      "runtime_per_asset_ms",
      "p95_runtime_ms",
      "mean_runtime_ms",
      "median_runtime_ms",
      "min_runtime_ms",
      "max_runtime_ms",
      "garch_fit_time_ms",
      "forecast_time_ms",
      "cache_hit_ratio"
    ]
  },

  "outputs": {
    "parameter_store": {
      "path": "cache/garch_asset_parameters.parquet",
      "contents": [
        "asset",
        "date",
        "estimation_window",
        "omega",
        "alpha",
        "beta",
        "alpha_plus_beta",
        "unconditional_variance",
        "fit_success",
        "convergence_flag",
        "distribution",
        "loglikelihood",
        "aic",
        "bic"
      ]
    },

    "volatility_series_store": {
      "path": "results/classical_risk/garch_asset_conditional_volatility_series.parquet",
      "format": "parquet",
      "contents": [
        "asset",
        "date",
        "estimation_window",
        "sigma_t",
        "sigma_t2",
        "one_step_forecast_sigma",
        "one_step_forecast_sigma2"
      ],
      "notes": "Contains filtered conditional volatility and one-step ahead rolling forecasts per asset."
    },

    "risk_series_store": {
      "path": "results/classical_risk/garch_asset_var_cvar_series.parquet",
      "format": "parquet",
      "contents": [
        "asset",
        "date",
        "confidence_level",
        "horizon",
        "estimation_window",
        "VaR",
        "CVaR"
      ]
    },

    "metrics_table": {
      "path": "results/classical_risk/garch_asset_level_metrics.parquet",
      "format": "parquet",
      "row_granularity": "asset_x_confidence_x_horizon_x_window",
      "notes": "Aggregated metrics over the full backtest period per asset and configuration."
    },

    "time_sliced_metrics_table": {
      "path": "results/classical_risk/garch_asset_level_time_sliced_metrics.parquet",
      "format": "parquet",
      "row_granularity": "asset_x_slice_type_x_slice_value_x_confidence_x_horizon_x_window"
    },

    "garch_results_scheme.json": {
      "path": "results/classical_risk/garch_asset_level_results_scheme.json",
      "format": "json",
      "contents": "the scheme of the results, all the .parquet files"
    },

    "report": {
      "path": "results/classical_risk/garch_asset_level_report.md",
      "include_sections": [
        "methodology_overview",
        "garch_specification_and_estimation",
        "rolling_forecast_construction",
        "var_cvar_construction",
        "backtesting_results",
        "time_sliced_backtesting",
        "tail_risk_behavior",
        "distributional_characteristics",
        "computational_performance",
        "key_insights"
      ]
    }
  },

  "paper_usage_notes": {
    "simulation_phase": "Use this configuration for large-scale asset-level evaluation across the full historical sample, multiple estimation windows, confidence levels, and horizons. This produces statistically coherent GARCH backtests without portfolio aggregation confounds.",
    "paper_phase": "For paper figures/tables: select representative assets and stress subperiods; report both full-period metrics and time-sliced metrics (year/quarter) to show regime sensitivity. Report GARCH parameter stability (alpha+beta) and information criteria (AIC/BIC) alongside coverage tests."
  }
}
